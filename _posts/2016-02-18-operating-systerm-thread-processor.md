---
layout: post
title: 操作系统原理－进程线程
date:   2016-02-18 11:47:06
categories: thread_precessor
tag: thread
image: /assets/images/post.jpg
---
<h2>{{ page.title }}</h2>
<p>一直对高并发的ｗｅｂ系统感兴趣，看了很多文章和资料，发现很多东西还理解的不清楚，特别是多线程和多进程方面的知识。
这样不行，所以回归原理，用了周末的时间，把操作系统原理的进程和线程的知识内容好好的温习了。突然发现，上学时不懂，不明白的问题，一下就明白了。
  所以，写了这篇博客，也算是读书笔记吧。主要内容：操作系统并发、多进程、多线程</p>

<p>
<h3>第一章</h3>

操作系统的重要任务就是对进程进行有效地调度管理，操作系统将负责进程的建立和撤销，提供进程间通信机制，控制和协调进程的运行，有效地分配和回收进程使用的资源，使整个计算机系统有条不紊地工作。
操作系统的特征：
１、并发性。
　　“并发”是指同事存在多个平行的活动，例如Ｉ／Ｏ操作与主机同事运行，在内存中同时存在几道运行程序。由于并发的出现，需要系统解决一个问题，即如何从一个活动切换到另一个活动，如何保护一个活动使其免受另一些活动的影响，以及如何在相互依赖的活动之间实施同步等。
程序的并发性体现为两个方面：用户程序与用户程序的并发运行和用户程序与系统程序的并发运行。
　　在但处理器环境下，并发执行的程序实际是交替运行的，但从宏观上看，这些程序可视为是同时运行的。
２、共享性。
　　共享性是指操作系统程序与多个用户程序共用操作系统中的各种资源。

进程调度:
  操作系统负责进程的调度管理。具体包括：进程的建立和撤销；安排处理器在这些进程间转换，交替为它们服务；进程间的通信；
  进程的建立和撤销（就绪、执行、阻塞／挂起）；以及进程的同步与互斥、进程的死锁管理等。

多道程序批处理系统可以充分利用中央处理器及各种设备资源。多到程序需要内存管理和调度管理

分时操作系统（Time Sharing System）
分时操作系统的特征是一台计算机挂有若干终端，每个终端提供给一个用户，不同用户可以通过自己的终端同时访问系统。在分时操作系统中，系统将处理机的时间分割成很小的时间段，每个时间段称为时间片，
系统将处理时间片轮流分配给每个终端，用户程序以很短的时间为单位交替执行。由于调试程序的用户常常只发简短的命令，因此计算机能够为很多用户程序以很短的时间为单位交替执行，并在空闲时还能在后台运行大的作业。
ｕｎｉｘ操作系统便是分时操作系统的杰出范例。（Ｌｉｎｕｘ也是分时操作系统）
分时操作系统有多路性、交互性、“独占”性和及时性特征。多路性是指同时有多个用户用一台计算机，宏观上是多个人同时使用一个ｃｐｕ，微观上是多个人在不同时刻轮流使用。交互性是指用户可以根据系统相应结果进一步提出新请求。
独占性是指用户感觉不到计算机在为其他人服务，就像整个系统为他自己独占使用。及时性是指用户的请求能够及时得到响应。（联想到ｗｅｂ系统）

批处理系统和分时系统使用了多道程序设计技术。批处理系统的多道程序设计的主要目标充分利用处理器，分时系统的多道程序设计的主要目的是减少系统对用户命令的响应，及时响应用户的要求，从而可以同时支持多过喝用户
常见的通用操作系统是分时操作系统与批处理系统的结合，原则是：分时优先，批处理后。

分布式操作系统的特点是将多台计算机管理起来，使它们联合、协调工作，完成一个共同任务。
Linux 是各类服务器的最佳选择之一，在相同硬件条件下，系统性能更优越。
  </p>
<p>
<h3>第二章　进程与线程</h3>

进程是操作系统最核心的概念，它是对正在运行的程序的抽象。线程是进程中的一个实例，是系统实施调度的独立单位。
多道程序设计是在内存中同时存放多道程序，这些程序在管理程序的控制下交替地在ｃｐｕ上执行。虽然ｃｐｕ执行的方式是顺序的，即在某一时刻只有一个程序在ｃｐｕ上执行，但ｃｐｕ调度程序的出现，使得多个程序交替地在ｃｐｕ上运行。
从宏观上看，系统中的多个程序都“同时”得到执行，即实现了程序的并发执行。
程序并发执行产生的三各特征：
１、失去封闭性。并发执行的多个程序共享系统中的资源，因此这些资源的使用状态不再由某个程序决定，而是受到并发程序的共同影响，多个并发程序执行时的相对速度是不确定的，何时发生控制转换并非由程序本身决定，而是整个系统当时所处的环境有关
因此有一定随机性。
２、程序与计算不再一一对应。在并发执行的过程中，一个被共享的程序可以由多个用户作业调度，从而形成多个“计算”。
３、并发程序在执行时互相制约。并发程序的执行过程并非是顺序性的，而是会“走走停停”，即执行－暂停－执行　的活动规律。各个程序的执行状态与当时所处的环境资源有关。
这种停顿的原因并不是程序造成的，而是与并发的其他程序相互影响的结果。

进程的特征：　动态性。产生，消亡，暂停。并发性。一个程序的进程可以与另一个程序的进程并发执行，各自额执行速度无法预知，以异步形式执行。调度性。进程是系统中申请资源和调度的单位。

进程的状态。
１、运行状态。运行状态是指当前进程已经分配到ｃｐｕ，正在处理机上执行时的状态。处于此状态的进程个数是不能超过ｃｐｕ的数目的。
２、就绪状态。就绪状态是指进程已经具备运行条件，但其他进程占用ｃｐｕ，使其不能运行而只能等待ｃｐｕ的状态。处于此状态的进程数可以有多个。
３、阻塞状态。一个进程正在等待某一事件而暂时不能运行。处于阻塞状态的进程不具备执行条件，即使ｃｐｕ空闲，它页无法运行。系统中处于此状态的进程可以有多个。
进程状态的转换：
１、处于就绪状态的进程被进程调度程序选中后，就分配给处理器来执行。该进程的状态就由就绪转换运行状态。运行状态的进程在运行的过程中可能需要等待某一事件发生，之后继续运行，因此该进程由运行状态转换为阻塞状态。
２、处于运行状态的进程在运行时，因分配的处理器时间片已经用完而不得不让出处理器，于是由运行状态转换为就绪状态。
３、处于阻塞状态的进程，若等待的事件已经发生，就由阻塞状态转换为就绪状态。
４、新建状态。进程刚刚被创建，尚未放入就绪队列时的状态。
５、终止状态。处于终止状态的进程不能再被调用，只能被系统撤销。
进程在生存期内不断发生变化，一个进程可以多次处于就绪状态和运行状态，也可以多次处于阻塞状态，而且可能排在不同的阻塞队列上。

程序和数据是进程的主题。一个数据结构记录进程的动态特性，如当前状态、本身特性、结构描述、对资源的占用和调度信息等，这种数据结构称为进程控制块（Process Control Block , PCB）。
程序的执行必须有一个或多个栈，用来保存过程调用和参数传递的整个过程。进程影像一般由　程序、数据、栈和ＰＣＢ四步分组成。
操作系统根据ＰＣＢ对进程实施控制和管理。进程控制包括：进程创建、进程撤销、进程阻塞、进程唤醒、改变进程优先级、调度进程运行。这些操作都要对应地执行一个特殊的程序段，同时系统也通过系统调用给用户提供进程控制的功能
</p>
<p>{{ page.date | date_to_string }}</p>
